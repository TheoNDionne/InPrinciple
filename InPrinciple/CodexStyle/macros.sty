%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%                                                      MACROS.STY
%
% Macros provided here:
% -> Math macros (shortcuts and additional notation)
% -> Annotation macros (colored text)
% -> Math mode color boxes (cboxed and highlightcboxed)
%   -> Titled boxes and untitled boxes
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                 Math & Physics                %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% My beloved TeX-JAM macros (ty JL <3)


% Better epsilon -----------------------
% \let\oldepsilon\epsilon
% \let\epsilon\varepsilon
% \let\varepsilon\oldepsilon


% Better bars -----------------------
\renewcommand{\bar}[1]{\mkern 1.5mu\overline{\mkern-1.5mu#1\mkern-1.5mu}\mkern 1.5mu}


% Equations -----------------------
\newcommand{\al}[1]{\begin{align} #1 \end{align}} % Numbered equation(s),
\newcommand{\ald}[1]{\begin{equation}\begin{aligned} #1 \end{aligned}\end{equation}} % One number per block
\newcommand{\eqn}[1]{\begin{align*} #1 \end{align*}} % Number-less equation(s),
\newcommand{\sys}[1]{\begin{dcases*} #1 \end{dcases*}} % System of equations.


% Exponents -----------------------
\newcommand{\Exp}[1]{\symup{e}^{#1}}		% e^#
\newcommand{\E}[1]{\times 10^{#1}}		% X 10^#


% Delimiters (auto sizing) -----------------------
\newcommand{\p}[1]{\left( {#1} \right)}	% (#)
\newcommand{\cro}[1]{\left[ {#1} \right]}	% [#]
\newcommand{\abs}[1]{\left| {#1} \right|}	% |#|
\newcommand{\avg}[1]{\left\langle {#1} \right\rangle} % <#>
\newcommand{\acc}[1]{\left\lbrace {#1} \right\rbrace} % {#}


% Vector notation -----------------------
\newcommand{\ve}[1]{\symbf{#1}} % Upright bold face
\newcommand{\vu}[1]{\hat{\ve{#1}}} % Hat vector upright bold face
\newcommand{\tens}{\otimes} % Tensor product
\newcommand{\nablav}{\symbf{\nabla}} % Bold gradient


% Trig. functions with automatic formating  -----------------------
% trigonometric functions
\newcommandx{\Sin}[2][1={}]{\operatorname{sin}^{#1}\!\p{#2}}
\newcommandx{\Cos}[2][1={}]{\operatorname{cos}^{#1}\!\p{#2}}
\newcommandx{\Tan}[2][1={}]{\operatorname{tan}^{#1}\!\p{#2}}
\newcommandx{\Csc}[2][1={}]{\operatorname{csc}^{#1}\!\p{#2}}
\newcommandx{\Sec}[2][1={}]{\operatorname{sec}^{#1}\!\p{#2}}
\newcommandx{\Cot}[2][1={}]{\operatorname{cot}^{#1}\!\p{#2}}
\newcommandx{\Arcsin}[2][1={}]{\operatorname{arcsin}^{#1}\!\p{#2}}
\newcommandx{\Arccos}[2][1={}]{\operatorname{arccos}^{#1}\!\p{#2}}
\newcommandx{\Arctan}[2][1={}]{\operatorname{arctan}^{#1}\!\p{#2}}

% hyperbolic trigonometric functions
\newcommandx{\Sinh}[2][1={}]{\operatorname{sinh}^{#1}\!\p{#2}}
\newcommandx{\Cosh}[2][1={}]{\operatorname{cosh}^{#1}\!\p{#2}}
\newcommandx{\Tanh}[2][1={}]{\operatorname{tanh}^{#1}\!\p{#2}}
\newcommandx{\Arcsinh}[2][1={}]{\operatorname{arcsinh}^{#1}\!\p{#2}}
\newcommandx{\Arccosh}[2][1={}]{\operatorname{arccosh}^{#1}\!\p{#2}}
\newcommandx{\Arctanh}[2][1={}]{\operatorname{arctanh}^{#1}\!\p{#2}}


% Matrices -----------------------
\newcommand{\mat}[1]{\begin{bmatrix} #1 \end{bmatrix}} % Matrices with hooks.
\newcommand{\pmat}[1]{\begin{pmatrix} #1 \end{pmatrix}} % Matrices with parentheses.
\newcommand{\deter}[1]{\abs{\begin{matrix} #1 \end{matrix}}} % Determinant.
\newcommand{\Det}[1]{\operatorname{det}\p{#1}} % det(#)
\newcommand{\Tr}[1]{\operatorname{Tr}\p{#1}} % Tr(#)
\newcommand{\ma}[1]{\symup{#1}} % upright matrix


% Derivatives -----------------------
\newcommand{\D}{\symup{d}} % Differential 'd'.
\newcommand{\del}{\partial} % Partial 'd'.
\newcommand{\delbar}{\slashed{\del}} % Partial Inexact differential.
\newcommand{\dbar}{\dj}% Inexact differential.

% derivatives: w.r.t #2, #1 is the function and #3 is the order.
\newcommandx{\dd}[3][1={},3={}]{\frac{\D^{#3} #1}{\D #2^{#3}}} % Total derivative
\newcommandx{\ddp}[3][1={},3={}]{\frac{\del^{#3} #1}{\del #2^{#3}}} % Dérivée partielle
\newcommandx{\ddf}[3][1={},3={}]{\frac{\delta^{#3} #1}{\delta #2^{#3}}} % Functional derivative
\newcommand{\eval}[1]{\left. {#1} \right|} % Bar on the right of expression.


% Integrals -----------------------
\newcommand{\intinf}{\int\displaylimits_{-\infty}^{\infty}} % From -00 to 00.
\newcommandx{\Intdisp}[2][1={},2={}]{\int\displaylimits_{#1}^{#2}} % Faster bounded integrals with displaymaths.
\newcommandx{\Int}[2][1={},2={}]{\int_{#1}^{#2}} % Faster bounded integrals.


% Complex numbers -----------------------
\newcommand{\real}[1]{\operatorname{Re}\acc{#1}} % Re{#}
\newcommand{\imag}[1]{\operatorname{Im}\acc{#1}} % Im{#}


% Quantum notation ----------------------
\newcommand{\op}[1]{\hat{\symup{#1}}} % upright and hat on operators
\newcommand{\ketbra}[2]{\ket{#1}\!\!\bra{#2}} % ket glued to bra, for matrix elements


% Comments -----------------------
\newcommand{\red}[1]{{\color{red}#1}}
% \newcommand{\comment}[1]{\marginpar{\parbox[b]{\marginparwidth}{\color{red}#1}}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                     Boxes                     %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Box title language support --------------------
\addto\captionsfrench{\def\theoremname{Théorème}}
\addto\captionsenglish{\def\theoremname{Theorem}}

\addto\captionsfrench{\def\definitionname{Définition}}
\addto\captionsenglish{\def\definitionname{Definition}}

\addto\captionsfrench{\def\corollaryname{Corollaire}}
\addto\captionsenglish{\def\corollaryname{Corollary}}

\addto\captionsfrench{\def\examplename{Exemple}}
\addto\captionsenglish{\def\examplename{Example}}

\addto\captionsfrench{\def\lemmaname{Lemme}}
\addto\captionsenglish{\def\lemmaname{Lemma}}


% Math boxes -----------------------
\makeatletter
\newcommand{\cboxed}[1]{%
  \mathchoice
    {\fcolorbox{MainColor}{MainColor!2}{$\displaystyle #1$}}
    {\fcolorbox{MainColor}{MainColor!2}{$\textstyle #1$}}
    {\fcolorbox{MainColor}{MainColor!2}{$\scriptstyle #1$}}
    {\fcolorbox{MainColor}{MainColor!2}{$\scriptscriptstyle #1$}}%
}
\makeatother

\makeatletter
\newcommand{\highlightcboxed}[1]{%
  \mathchoice
    {\fcolorbox{HighlightColor}{HighlightColor!2}{$\displaystyle #1$}}
    {\fcolorbox{HighlightColor}{HighlightColor!2}{$\textstyle #1$}}
    {\fcolorbox{HighlightColor}{HighlightColor!2}{$\scriptstyle #1$}}
    {\fcolorbox{HighlightColor}{HighlightColor!2}{$\scriptscriptstyle #1$}}%
}
\makeatother


% Box styles -----------------------
\tcbset{ % numbered + MainColor
namedcolorstyle/.style={
    fonttitle=\bfseries\upshape, % bold upright title
    fontupper=\upshape, % upright body font
    arc=0mm, % sharpish corner
    colback=MainColor!2, % color of the background
    colframe=MainColor, % color of the frame
    width=\linewidth, % width of the box
    boxrule=1pt,
    top=1mm,
    bottom=1mm,
    left=2mm,
    right=2mm,
    enhanced
}
}

\tcbset{ % unnumbered + MainColor
unnamedcolorstyle/.style={
    arc=0mm, % sharpish corner
    colback=MainColor!2, % color of the background
    colframe=MainColor, % color of the frame
    width=\linewidth, % width of the box
    boxrule=1pt,
    top=1mm,
    bottom=1mm,
    left=2mm,
    right=2mm,
    enhanced
}
}

\tcbset{ % unnumbered + HighlightColor
unnamedhighlightstyle/.style={
    arc=0mm, % sharpish corner
    colback=HighlightColor!2, % color of the background
    colframe=HighlightColor, % color of the frame
    width=\linewidth, % width of the box
    boxrule=1pt,
    top=1mm,
    bottom=1mm,
    left=2mm,
    right=2mm,
    enhanced
}
}

% Defining colored boxes ------------------------
% named
\newtcbtheorem[auto counter,number within=\boxesnumberwithin]{theorembox}%
    {\theoremname}{namedcolorstyle}{theorem}

\newtcbtheorem[auto counter,number within=\boxesnumberwithin]{definitionbox}%
    {\definitionname}{namedcolorstyle}{definition}

\newtcbtheorem[auto counter,number within=\boxesnumberwithin]{corollarybox}%
    {\corollaryname}{namedcolorstyle}{corollary}

\newtcbtheorem[auto counter,number within=\boxesnumberwithin]{examplebox}%
    {\examplename}{namedcolorstyle}{example}

\newtcbtheorem[auto counter,number within=\boxesnumberwithin]{lemmabox}%
    {\lemmaname}{namedcolorstyle}{lemma}

% unnamed
\newtcolorbox{cbox}{
  unnamedcolorstyle
}

\newtcolorbox{highlightcbox}{
  unnamedhighlightstyle
}
